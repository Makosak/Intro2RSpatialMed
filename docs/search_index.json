[
["01-intro.html", "2 Introduction 2.1 Load Spatial Data 2.2 Non-Spatial &amp; Spatial Views 2.3 Spatial Data Structure 2.4 Exploring Coordinate Reference Systems 2.5 Refine Basic Map 2.6 Arrange multiple maps 2.7 Interactive Mode", " 2 Introduction In the workshop, we’ll review: What is Spatial Data? What is the sf framework for R? library(sf) ## Warning: package &#39;sf&#39; was built under R version 3.6.2 ## Linking to GEOS 3.7.2, GDAL 2.4.2, PROJ 5.2.0 To delve in further, let’s see some spatial data in action. 2.1 Load Spatial Data Chi_tracts = st_read(&quot;data/geo_export_aae47441-adab-4aca-8cb0-2e0c0114096e.shp&quot;) ## Reading layer `geo_export_aae47441-adab-4aca-8cb0-2e0c0114096e&#39; from data source ## `/Users/maryniakolak/code/Intro2RSpatialMed/data/geo_export_aae47441-adab-4aca-8cb0-2e0c0114096e.shp&#39; ## using driver `ESRI Shapefile&#39; ## Simple feature collection with 801 features and 9 fields ## Geometry type: POLYGON ## Dimension: XY ## Bounding box: xmin: -87.94025 ymin: 41.64429 xmax: -87.52366 ymax: 42.02392 ## CRS: 4326 2.2 Non-Spatial &amp; Spatial Views head(Chi_tracts) ## Simple feature collection with 6 features and 9 fields ## Geometry type: POLYGON ## Dimension: XY ## Bounding box: xmin: -87.68822 ymin: 41.72902 xmax: -87.62394 ymax: 41.87455 ## CRS: 4326 ## commarea commarea_n countyfp10 geoid10 name10 namelsad10 notes ## 1 44 44 031 17031842400 8424 Census Tract 8424 &lt;NA&gt; ## 2 59 59 031 17031840300 8403 Census Tract 8403 &lt;NA&gt; ## 3 34 34 031 17031841100 8411 Census Tract 8411 &lt;NA&gt; ## 4 31 31 031 17031841200 8412 Census Tract 8412 &lt;NA&gt; ## 5 32 32 031 17031839000 8390 Census Tract 8390 &lt;NA&gt; ## 6 28 28 031 17031838200 8382 Census Tract 8382 &lt;NA&gt; ## statefp10 tractce10 geometry ## 1 17 842400 POLYGON ((-87.62405 41.7302... ## 2 17 840300 POLYGON ((-87.68608 41.8229... ## 3 17 841100 POLYGON ((-87.62935 41.8528... ## 4 17 841200 POLYGON ((-87.68813 41.8556... ## 5 17 839000 POLYGON ((-87.63312 41.8744... ## 6 17 838200 POLYGON ((-87.66782 41.8741... plot(Chi_tracts) 2.3 Spatial Data Structure str(Chi_tracts) ## Classes &#39;sf&#39; and &#39;data.frame&#39;: 801 obs. of 10 variables: ## $ commarea : Factor w/ 77 levels &quot;1&quot;,&quot;10&quot;,&quot;11&quot;,..: 39 55 28 25 26 21 62 49 74 75 ... ## $ commarea_n: num 44 59 34 31 32 28 65 53 76 77 ... ## $ countyfp10: Factor w/ 1 level &quot;031&quot;: 1 1 1 1 1 1 1 1 1 1 ... ## $ geoid10 : Factor w/ 801 levels &quot;17031010100&quot;,..: 785 767 772 773 756 751 584 513 684 34 ... ## $ name10 : Factor w/ 801 levels &quot;1001&quot;,&quot;1002&quot;,..: 782 764 769 770 753 748 545 443 663 266 ... ## $ namelsad10: Factor w/ 801 levels &quot;Census Tract 1001&quot;,..: 782 764 769 770 753 748 545 443 663 266 ... ## $ notes : Factor w/ 7 levels &quot;Half in CA 64 (Midway Airport)&quot;,..: NA NA NA NA NA NA NA NA NA NA ... ## $ statefp10 : Factor w/ 1 level &quot;17&quot;: 1 1 1 1 1 1 1 1 1 1 ... ## $ tractce10 : Factor w/ 801 levels &quot;010100&quot;,&quot;010201&quot;,..: 785 767 772 773 756 751 584 513 684 34 ... ## $ geometry :sfc_POLYGON of length 801; first list element: List of 1 ## ..$ : num [1:243, 1:2] -87.6 -87.6 -87.6 -87.6 -87.6 ... ## ..- attr(*, &quot;class&quot;)= chr &quot;XY&quot; &quot;POLYGON&quot; &quot;sfg&quot; ## - attr(*, &quot;sf_column&quot;)= chr &quot;geometry&quot; ## - attr(*, &quot;agr&quot;)= Factor w/ 3 levels &quot;constant&quot;,&quot;aggregate&quot;,..: NA NA NA NA NA NA NA NA NA ## ..- attr(*, &quot;names&quot;)= chr &quot;commarea&quot; &quot;commarea_n&quot; &quot;countyfp10&quot; &quot;geoid10&quot; ... st_crs(Chi_tracts) ## Coordinate Reference System: ## User input: 4326 ## wkt: ## GEOGCS[&quot;WGS84(DD)&quot;, ## DATUM[&quot;WGS84&quot;, ## SPHEROID[&quot;WGS84&quot;,6378137.0,298.257223563]], ## PRIMEM[&quot;Greenwich&quot;,0.0], ## UNIT[&quot;degree&quot;,0.017453292519943295], ## AXIS[&quot;Geodetic longitude&quot;,EAST], ## AXIS[&quot;Geodetic latitude&quot;,NORTH]] 2.4 Exploring Coordinate Reference Systems Chi_tracts.moll &lt;- st_transform(Chi_tracts, crs = &quot;+proj=moll&quot;) plot(st_geometry(Chi_tracts.moll), border = &quot;gray&quot;, lwd = 2, main = &quot;Mollweide&quot;, sub=&quot;preserves areas&quot;) st_crs(Chi_tracts.moll) ## Coordinate Reference System: ## User input: +proj=moll ## wkt: ## PROJCS[&quot;unnamed&quot;, ## GEOGCS[&quot;WGS 84&quot;, ## DATUM[&quot;unknown&quot;, ## SPHEROID[&quot;WGS84&quot;,6378137,298.257223563]], ## PRIMEM[&quot;Greenwich&quot;,0], ## UNIT[&quot;degree&quot;,0.0174532925199433]], ## PROJECTION[&quot;Mollweide&quot;], ## PARAMETER[&quot;central_meridian&quot;,0], ## PARAMETER[&quot;false_easting&quot;,0], ## PARAMETER[&quot;false_northing&quot;,0]] Chi_tracts.54019 = st_transform(Chi_tracts, 54019) plot(st_geometry(Chi_tracts.54019), border = &quot;gray&quot;, lwd = 2, main = &quot;Winkel&quot;, sub=&quot;minimal distortion&quot;) st_crs(Chi_tracts.54019) ## Coordinate Reference System: ## User input: EPSG:54019 ## wkt: ## PROJCS[&quot;World_Winkel_II&quot;, ## GEOGCS[&quot;GCS_WGS_1984&quot;, ## DATUM[&quot;WGS_1984&quot;, ## SPHEROID[&quot;WGS_84&quot;,6378137.0,298.257223563]], ## PRIMEM[&quot;Greenwich&quot;,0.0], ## UNIT[&quot;Degree&quot;,0.0174532925199433]], ## PROJECTION[&quot;Winkel_II&quot;], ## PARAMETER[&quot;False_Easting&quot;,0.0], ## PARAMETER[&quot;False_Northing&quot;,0.0], ## PARAMETER[&quot;Central_Meridian&quot;,0.0], ## PARAMETER[&quot;Standard_Parallel_1&quot;,50.45977625218981], ## UNIT[&quot;Meter&quot;,1.0], ## AUTHORITY[&quot;Esri&quot;,&quot;54019&quot;]] Chi_tracts.3435 &lt;- st_transform(Chi_tracts, 3435) st_crs(Chi_tracts.3435) ## Coordinate Reference System: ## User input: EPSG:3435 ## wkt: ## PROJCS[&quot;NAD83 / Illinois East (ftUS)&quot;, ## GEOGCS[&quot;NAD83&quot;, ## DATUM[&quot;North_American_Datum_1983&quot;, ## SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101, ## AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]], ## TOWGS84[0,0,0,0,0,0,0], ## AUTHORITY[&quot;EPSG&quot;,&quot;6269&quot;]], ## PRIMEM[&quot;Greenwich&quot;,0, ## AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]], ## UNIT[&quot;degree&quot;,0.0174532925199433, ## AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]], ## AUTHORITY[&quot;EPSG&quot;,&quot;4269&quot;]], ## PROJECTION[&quot;Transverse_Mercator&quot;], ## PARAMETER[&quot;latitude_of_origin&quot;,36.66666666666666], ## PARAMETER[&quot;central_meridian&quot;,-88.33333333333333], ## PARAMETER[&quot;scale_factor&quot;,0.999975], ## PARAMETER[&quot;false_easting&quot;,984250.0000000002], ## PARAMETER[&quot;false_northing&quot;,0], ## UNIT[&quot;US survey foot&quot;,0.3048006096012192, ## AUTHORITY[&quot;EPSG&quot;,&quot;9003&quot;]], ## AXIS[&quot;X&quot;,EAST], ## AXIS[&quot;Y&quot;,NORTH], ## AUTHORITY[&quot;EPSG&quot;,&quot;3435&quot;]] plot(st_geometry(Chi_tracts.3435), border = &quot;gray&quot;, lwd = 2, main = &quot;NAD83 / Illinois East (ftUS)&quot;, sub=&quot;topo mapping &amp; survey use&quot;) Chi_tracts.Hawaii = st_transform(Chi_tracts, 102114) plot(st_geometry(Chi_tracts.Hawaii), border = &quot;gray&quot;, lwd = 2, main = &quot;Old Hawaiian UTM Zone 4N&quot;, sub=&quot;wrong projection!&quot;) 2.5 Refine Basic Map library(tmap) ## Warning: replacing previous import &#39;sf::st_make_valid&#39; by ## &#39;lwgeom::st_make_valid&#39; when loading &#39;tmap&#39; tm_shape(Chi_tracts) + tm_borders(alpha=0.5) tm_shape(Chi_tracts) + tm_fill(col = &quot;gray90&quot;) + tm_borders(alpha=0.2, col = &quot;gray10&quot;) + tm_scale_bar(position = (&quot;left&quot;), lwd = 0.8) + tm_layout(frame = F) Check out https://rdrr.io/cran/tmap/man/tm_polygons.html for more ideas. 2.6 Arrange multiple maps tracts.4326 &lt;- tm_shape(Chi_tracts) + tm_fill(col = &quot;gray90&quot;) + tm_layout(frame = F, title = &quot;EPSG 4326&quot;) tracts.54019 &lt;- tm_shape(Chi_tracts.54019) + tm_fill(col = &quot;gray90&quot;) + tm_layout(frame = F, title = &quot;EPSG 54019&quot;) tmap_arrange(tracts.4326, tracts.54019) 2.7 Interactive Mode tmap_mode(&quot;view&quot;) ## tmap mode set to interactive viewing tm_shape(Chi_tracts) + tm_fill(col = &quot;gray90&quot;) + tm_borders(alpha=0.2, col = &quot;gray10&quot;) + tm_scale_bar(position = (&quot;left&quot;), lwd = 0.8) + tm_layout(frame = F) ## Warning in `$.crs`(gm$shape.master_crs, &quot;proj4string&quot;): CRS uses proj4string, ## which is deprecated. ## Warning in `$.crs`(crs, &quot;proj4string&quot;): CRS uses proj4string, which is ## deprecated. tm_shape(Chi_tracts) + tm_fill(col = &quot;gray90&quot;, alpha = 0.5) + tm_borders(alpha=0.2, col = &quot;gray10&quot;) + tm_scale_bar(position = (&quot;left&quot;), lwd = 0.8) + tm_layout(frame = F) ## Warning in `$.crs`(gm$shape.master_crs, &quot;proj4string&quot;): CRS uses proj4string, ## which is deprecated. ## Warning in `$.crs`(crs, &quot;proj4string&quot;): CRS uses proj4string, which is ## deprecated. tmap_mode(&quot;plot&quot;) ## tmap mode set to plotting "]
]
