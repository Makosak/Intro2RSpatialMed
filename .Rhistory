library(sf)
Chi_tracts = st_read("data/geo_export_aae47441-adab-4aca-8cb0-2e0c0114096e.shp")
head(Chi_tracts)
plot(Chi_tracts)
str(Chi_tracts)
st_crs(Chi_tracts)
Chi_tracts.3435 <- st_transform(Chi_tracts, 3435)
st_crs(Chi_tracts.3435)
plot(st_geometry(Chi_tracts.3435), border = "gray", lwd = 2, main = "NAD83 / Illinois East (ftUS)", sub="topo mapping & survey use")
Chi_tracts.moll <- st_transform(Chi_tracts, crs = "+proj=moll")
plot(st_geometry(Chi_tracts.moll), border = "gray", lwd = 2, main = "Mollweide", sub="preserves areas")
st_crs(Chi_tracts.moll)
Chi_tracts.54019 = st_transform(Chi_tracts, 54019)
plot(st_geometry(Chi_tracts.54019), border = "gray", lwd = 2, main = "Winkel", sub="minimal distortion")
st_crs(Chi_tracts.54019)
Chi_tracts.Hawaii = st_transform(Chi_tracts, 102114)
plot(st_geometry(Chi_tracts.Hawaii), border = "gray", lwd = 2, main = "Old Hawaiian UTM Zone 4N", sub="wrong projection!")
library(tmap)
tm_shape(Chi_tracts) + tm_borders(alpha=0.5)
tm_shape(Chi_tracts) + tm_fill(col = "gray90") + tm_borders(alpha=0.2, col = "gray10") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tracts.4326 <- tm_shape(Chi_tracts) + tm_fill(col = "gray90") + tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tracts.moll <- tm_shape(Chi_tracts.moll) + tm_fill(col = "gray90") + tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tracts.Hawaii <- tm_shape(Chi_tracts.Hawaii) + tm_fill(col = "gray90") + tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tmap_arrange(tracts.4326, tracts.moll, tracts.Hawaii)
tracts.4326 <- tm_shape(Chi_tracts) + tm_fill(col = "gray90") +
tm_layout(frame = F, title = "EPSG 4326")
tracts.moll <- tm_shape(Chi_tracts.moll) + tm_fill(col = "gray90") +  tm_layout(frame = F, title = "EPSG Moll")
tracts.Hawaii <- tm_shape(Chi_tracts.Hawaii) + tm_fill(col = "gray90") +
tm_layout(frame = F, title = "EPSG Hawaii")
tracts.54019 <- tm_shape(Chi_tracts) + tm_fill(col = "gray90") +  tm_layout(frame = F, title = "EPSG 54019")
tmap_arrange(tracts.4326, tracts.moll, tracts.Hawaii, tracts.54019)
tracts.54019 <- tm_shape(Chi_tracts.54019) + tm_fill(col = "gray90") +  tm_layout(frame = F, title = "EPSG 54019")
tmap_arrange(tracts.4326, tracts.moll, tracts.Hawaii, tracts.54019)
tmap_arrange(tracts.4326, tracts.moll)
tracts.4326 <- tm_shape(Chi_tracts) + tm_fill(col = "gray90") +
tm_layout(frame = F, title = "EPSG 4326")
tracts.54019 <- tm_shape(Chi_tracts.54019) + tm_fill(col = "gray90") +  tm_layout(frame = F, title = "EPSG 54019")
tmap_arrange(tracts.4326, tracts.54019)
tm_shape(Chi_tracts) + tm_fill(col = "gray90") + tm_borders(alpha=0.2, col = "gray10") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tmap_mode("view")
tm_shape(Chi_tracts) + tm_fill(col = "gray90") + tm_borders(alpha=0.2, col = "gray10") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts) + tm_fill(col = "gray90", alpha = 0.5) + tm_borders(alpha=0.2, col = "gray10") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
View(Chi_tracts)
tm_shape(Chi_tracts) + tm_fill(col = "gray90", alpha = 0.5, labels = "name10") + tm_borders(alpha=0.2, col = "gray10") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
library(tidygeocoder)
methadoneClinics <- read.csv("chicago_methadone_nogeometry.csv")
setwd("~/Desktop/JCOIN-SpatialWorkshop2")
methadoneClinics <- read.csv("chicago_methadone_nogeometry.csv")
sample <- geo("4545 North Broadway St. Chicago, IL", lat = latitude, long = longitude, method = 'cascade')
str(methadoneClinics)
methadoneClinics$fullAdd <- paste(as.character(methadoneClinics$Address),
as.character(methadoneClinics$City),
as.character(methadoneClinics$State),
as.character(methadoneClinics$Zip))
geoCodedClinics <-  geocode(methadoneClinics,
address = 'fullAdd', lat = latitude, long = longitude, method = 'cascade')
geoCodedClinics
geoCodedClinics2 <- na.omit(geoCodedClinics)
methadoneSf <- st_as_sf(geoCodedClinics2,
coords = c("longitude", "latitude"),
crs = 4326)
#install.packages("sf")
library(sf)
methadoneSf <- st_as_sf(geoCodedClinics2,
coords = c("longitude", "latitude"),
crs = 4326)
tm_shape(methadoneSf) + tm_dots() + tm_basemap("OpenStreetMap")
library(tmap)
tmap_mode("view")
tmap_mode("plot")
tm_shape(methadoneSf) + tm_dots() + tm_basemap("OpenStreetMap")
setwd("~/code/Intro2RSpatialMed")
Chi_tracts = st_read("data/geo_export_54bc15d8-5ef5-40e4-8f72-bb0c6dbac9a5.shp")
Chi_Zips = st_read("data/geo_export_54bc15d8-5ef5-40e4-8f72-bb0c6dbac9a5.shp")
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "purple") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "purple") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
View(Chi_Zips)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip", size = 0.5) +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
+   tm_borders(alpha=0.2, col = "gray10") +
+   tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip", size = 0.5) +
+   tm_scale_bar(position = ("left"), lwd = 0.8) +
+   tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip", size = 1) +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip", size = 0.8) +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip", size = 0.7) +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") + tm_text("zip", size = 0.5) +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
## FIRST LAYER: CENSUS TRACT BOUNADRIES
tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_borders(alpha=0.2, col = "gray10") +
## SECOND LAYER: ZIP CODE BOUNDARIES WITH LABEL
tm_shape(Chi_Zips) + tm_borders(lwd = 2, col = "#0099CC") +
tm_text("zip", size = 0.7) +
## MORE CARTOGRAPHIC STYLE
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
