library(sf)
library(sf)
Chi_Zips = st_read("data/geo_export_54bc15d8-5ef5-40e4-8f72-bb0c6dbac9a5.shp")
head(Chi_Zips)
Chi_Zipsf <- merge(Chi_Zips, COVID.39f, by.x = "zip", by.y = "ZIP.code")
head(Chi_Zips)
Chi_Zipsf <- merge(Chi_Zips, COVID.39f, by.x = "zip", by.y = "ZIP.code")
Chi_Zipsf <- merge(Chi_Zips, COVID.39f, by.x = "zip", by.y = "ZIP.Code")
head(Chi_Zipsf)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", pal="BuPu",
title = "COVID Case Rate")
library(tmap)
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", n = 6, pal="BuPu",
title = "COVID Case Rate")
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", n = 5, pal="BuPu",
title = "COVID Case Rate")
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", n = 7, pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
title = "COVID Case Rate")
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="sd", pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", n=3, pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
legend.hist=T,
title = "COVID Case Rate", )
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
legend.hist=T,
title = "COVID Case Rate", ) +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
legend.hist=T, n=4,
title = "COVID Case Rate", ) +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
legend.hist=T, n=4,
title = "COVID Case Rate", ) +
tm_scale_bar() +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
legend.hist=T, n=4,
title = "COVID Case Rate", ) +
tm_scale_bar(position = "left") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
COVID <- read.csv("data/COVID-19_Cases__Tests__and_Deaths_by_ZIP_Code.csv")
head(COVID)
## How many weeks are in our dataset?
range(as.numeric(COVID$Week.End))
## Convert Week.End to numeric
COVID$week_end <- as.numeric(COVID$Week.End)
## Subset & inspect to week 39.
COVID.39 <- subset(COVID, COVID$Week.Number == "39")
head(COVID.39)
COVID.39f <- COVID.39[,c("ZIP.Code", "Case.Rate...Cumulative")]
head(COVID.39f)
library(sf)
Chi_Zips = st_read("data/geo_export_54bc15d8-5ef5-40e4-8f72-bb0c6dbac9a5.shp")
head(Chi_Zips)
Chi_Zipsf <- merge(Chi_Zips, COVID.39f, by.x = "zip", by.y = "ZIP.Code")
head(Chi_Zipsf)
#library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="quantile", n=3, pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="sd", pal="BuPu",
title = "COVID Case Rate")
library(tmap)
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
title = "COVID Case Rate")
tm_shape(Chi_Zipsf ) +
tm_polygons("Case.Rate...Cumulative",
style="jenks", pal="BuPu",
legend.hist=T, n=4,
title = "COVID Case Rate", ) +
tm_scale_bar(position = "left") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
CensusVar <- read.csv("DS01_Z.csv")
CensusVar <- read.csv("data/DS01_Z.csv")
head(CensusVar)
Chi_Zipsf <- merge(Chi_Zipsf, COVID.39f, by.x = "zip", by.y = "ZCTA")
View(Chi_Zipsf)
Chi_Zipsf <- merge(Chi_Zipsf, CensusVar, by.x = "zip", by.y = "ZCTA")
head(Chi_Zipsf)
COVID <- tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "COVID Rate")
Senior <- tm_shape(Chi_Zipsf) + tm_fill("over65P",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Senior %")
BlkP <- tm_shape(Chi_Zipsf) + tm_fill("blackP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Black %")
WhiP <- tm_shape(Chi_Zipsf) + tm_fill("whiteP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "White %")
tmap_arrange(COVID, Senior, BlkP, WhiP)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "COVID Rate")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "COVID Rate")
tm_layout(frame = F, title = "COVID Rate")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) + tm_layout(frame = F, title = "COVID Rate")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) + tm_layout(frame = F, title = "COVID Rate")
Senior <- tm_shape(Chi_Zipsf) + tm_fill("over65P",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Senior %")
BlkP <- tm_shape(Chi_Zipsf) + tm_fill("blackP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Black %")
WhiP <- tm_shape(Chi_Zipsf) + tm_fill("whiteP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "White %")
tmap_arrange(COVID, Senior, BlkP, WhiP)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) + tm_layout(frame = F, title = "COVID Rate")
tm_shape(Chi_Zipsf) + tm_fill("over65P",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Senior %")
COVID <- tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) + tm_layout(frame = F, title = "COVID Rate")
Senior <- tm_shape(Chi_Zipsf) + tm_fill("ovr65P",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Senior %")
BlkP <- tm_shape(Chi_Zipsf) + tm_fill("blackP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Black %")
WhiP <- tm_shape(Chi_Zipsf) + tm_fill("whiteP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "White %")
tmap_arrange(COVID, Senior, BlkP, WhiP)
COVID <- tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) + tm_layout(frame = F, title = "COVID Rate")
Senior <- tm_shape(Chi_Zipsf) + tm_fill("hispP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Latino %")
BlkP <- tm_shape(Chi_Zipsf) + tm_fill("blackP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Black %")
WhiP <- tm_shape(Chi_Zipsf) + tm_fill("whiteP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "White %")
tmap_arrange(COVID, Senior, BlkP, WhiP)
COVID <- tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4) + tm_layout(frame = F, title = "COVID Rate")
Senior <- tm_shape(Chi_Zipsf) + tm_fill("ovr65P",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Senior %")
NoHS <- tm_shape(Chi_Zipsf) + tm_fill("noHSP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Senior %")
BlkP <- tm_shape(Chi_Zipsf) + tm_fill("blackP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Black %")
Latnx <- tm_shape(Chi_Zipsf) + tm_fill("hispP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "Latinx %")
WhiP <- tm_shape(Chi_Zipsf) + tm_fill("whiteP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F, title = "White %")
tmap_arrange(COVID, Senior, NoHS, BlkP, Latnx, WhiP)
COVID <- tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_layout(frame = F)
Senior <- tm_shape(Chi_Zipsf) + tm_fill("ovr65P",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F)
NoHS <- tm_shape(Chi_Zipsf) + tm_fill("noHSP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F)
BlkP <- tm_shape(Chi_Zipsf) + tm_fill("blackP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F)
Latnx <- tm_shape(Chi_Zipsf) + tm_fill("hispP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F)
WhiP <- tm_shape(Chi_Zipsf) + tm_fill("whiteP",
style="jenks", pal="BuPu", n=4) +
tm_layout(frame = F)
tmap_arrange(COVID, Senior, NoHS, BlkP, Latnx, WhiP)
methadoneClinics <- read.csv("chicago_methadone_nogeometry.csv")
library(tidygeocoder)
library(tidygeocoder)
methadoneClinics <- read.csv("data/chicago_methadone_nogeometry.csv")
sample <- geo("4545 North Broadway St. Chicago, IL", lat = latitude, long = longitude, method = 'cascade')
str(methadoneClinics)
methadoneClinics$fullAdd <- paste(as.character(methadoneClinics$Address),
as.character(methadoneClinics$City),
as.character(methadoneClinics$State),
as.character(methadoneClinics$Zip))
geoCodedClinics <-  geocode(methadoneClinics,
address = 'fullAdd', lat = latitude, long = longitude, method = 'cascade')
geoCodedClinics
geoCodedClinics2 <- na.omit(geoCodedClinics)
methadoneSf <- st_as_sf(geoCodedClinics2,
coords = c("longitude", "latitude"),
crs = 4326)
tm_shape(methadoneSf) + tm_dots() + tm_basemap("OpenStreetMap")
write_sf(Chi_Zipsf, "ChiZipMaster.shp")
write_sf(Chi_Zipsf, "ChiZipMaster.geojson")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_polygons(alpha = 0.4, col = "gray10") +
## 2nd layer (overlay)
tm_shape(metClinics) + tm_dots(size = 0.4, col="red")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_polygons(alpha = 0.4, col = "gray10") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.4, col="red")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_polygons(alpha = 0.4, col = "gray10") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col="red")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col="black")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2)
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray80")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") + tm_add_legend()
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20")
+ tm_layout(legend.outside = TRUE, legend.outside.position = "bottom", title.snap.to.legend = TRUE)
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") + tm_layout(legend.outside = TRUE, legend.outside.position = "bottom", title.snap.to.legend = TRUE)
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") + tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE)
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") + tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") + tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago During COVID")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, title = "Methadone Providers", col = "gray20") + tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago During COVID")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, title = "Methadone Providers", col = "gray20") +
tm_legend(text.size=1,title.size=1.2) +
tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago During COVID")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, title = "Methadone Providers", col = "gray20") +
tm_legend(text.size=0.8,title.size=1) +
tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago During COVID")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, title = "Methadone Providers", col = "gray20") +
tm_legend(text.size=0.8,title.size=1) +
tm_add_legend("symbol", col = c("green", "blue"), size = c(.1,.5), labels = c("Cat1", "Cat2"))
tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago During COVID")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, title = "Methadone Providers", col = "gray20") +
tm_add_legend("symbol", col = "gray20", size = .2, labels = "Methadone MOUD")
tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE, title = "Methadone Providers in Chicago During COVID")
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") +
tm_add_legend("symbol", col = "gray20", size = .2, labels = "Methadone MOUD") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE)
## 1st layer (gets plotted first)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
## 2nd layer (overlay)
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") +
tm_add_legend("symbol", col = "gray20", size = .2, labels = "Methadone MOUD") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right", title.snap.to.legend = TRUE)
library(sf)
library(tmap)
library(tidygeocoder)
Chi_Zipsf< - read_sf("ChiZipMaster.shp")
Chi_Zipsf< - st_read("ChiZipMaster.geojson")
tm_layout(frame = F, title = "COVID Rate")
Chi_Zipsf< - st_read("ChiZipMaster.geojson")
Chi_Zipsf< - st_read("ChiZipMaster.geojson")
Chi_Zipsf< - st_read("ChiZipMaster.shp")
st_write(Chi_Zipsf, "data/ChiZipMaster.geojson")
Chi_Zipsf< - st_read("data/ChiZipMaster.geojson")
st_write(Chi_Zipsf, "data/ChiZipMaster.geojson",driver - "GeoJSON")
st_write(Chi_Zipsf, "data/ChiZipMaster.geojson", driver = "GeoJSON" )
st_write(Chi_Zipsf, "data/ChiZipMaster.geojson", driver = "GeoJSON", append= FALSE)
st_write(Chi_Zipsf, "data/ChiZipMaster1.geojson", driver = "GeoJSON", append= FALSE)
Chi_Zipsf< - st_read("data/ChiZipMaster1.geojson")
Chi_Zipsf1< - st_read("data/ChiZipMaster1.geojson")
Chi_Zipsf1<- st_read("data/ChiZipMaster1.geojson")
View(Chi_Zipsf1)
View(methadoneClinics)
AffHousing <- read.csv("dataAffordable_Rental_Housing_Developments.csv")
AffHousing <- read.csv("data/Affordable_Rental_Housing_Developments.csv")
head(AffHousing)
AffHousingSf <- st_as_sf(AffHousing,
coords = c("Longitude", "Latitude"),
crs = 4326)
head(AffHousing)
AffHousingSf <- st_as_sf(AffHousing,
coords = c("Longitude", "Latitude"),
crs = 4326)
AffHousing <- na.omit(AffHousing$Latitude)
AffHousingSf <- st_as_sf(AffHousing,
coords = c("Longitude", "Latitude"),
crs = 4326)
str(AffHousing)
head(AffHousing)
AffHousing <- read.csv("data/Affordable_Rental_Housing_Developments.csv")
head(AffHousing)
AffHousing <- na.omit(AffHousing)
str(AffHousing)
AffHousingSf <- st_as_sf(AffHousing,
coords = c("Longitude", "Latitude"),
crs = 4326)
tm_shape(AffHousingSf) + tm_dots()
head(AffHousing)
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_shape(AffHousingSf) + tm_bubbles("Units")
## Integrate More Data
```{r, warning=FALSE}
AffHousing <- read.csv("data/Affordable_Rental_Housing_Developments.csv")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_shape(AffHousingSf) + tm_bubbles("Units") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_shape(AffHousingSf) + tm_bubbles("Units", title = "Affordable Housing Units") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_shape(AffHousingSf) + tm_bubbles("Units") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_shape(AffHousingSf) + tm_bubbles("Units") +
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") +
tm_add_legend("symbol", col = "gray20", size = .2, labels = "Methadone MOUD") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_shape(AffHousingSf) + tm_bubbles("Units") +
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") +
tm_add_legend("symbol", col = "gray20", size = .2, labels = "Methadone MOUD") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf) + tm_fill("Case.Rate...Cumulative",
style="jenks", pal="BuPu", n=4, title = "COVID Rt") +
tm_text("zip", size = 0.7) +
tm_shape(AffHousingSf) + tm_bubbles("Units") +
tm_shape(methadoneSf) + tm_dots(size = 0.2, col = "gray20") +
tm_add_legend("symbol", col = "gray20", size = .2, labels = "Methadone MOUD") +
tm_layout(legend.outside = TRUE, legend.outside.position = "right")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_text("zip", size = 0.7) +
tm_shape(AffHousingSf) + tm_bubbles("Units")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", col = "Purple")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", col = "purple")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", style = "jenks", pal = "BuPu")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", n=4, style = "jenks", pal = "BuPu")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", style = "quantile", pal = "BuPu")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
+   tm_shape(AffHousingSf) + tm_bubbles("Units", style = "quantile", pal = "BuPu")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", style = "quantile", pal = "BuPu")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", style = "pretty", pal = "BuPu")
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", style = "pretty", pal = "BuPu")
str(AffHousingSf)
tm_shape(Chi_Zipsf) + tm_polygons(col = "gray80") +
tm_shape(AffHousingSf) + tm_bubbles("Units", style = "pretty")
setwd("~/code/Intro2RSpatialMed")
options(knitr.duplicate.label = "allow")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
tmap_mode("view")
tm_shape(Chi_tracts) + tm_fill(col = "gray90") + tm_borders(alpha=0.2, col = "gray10") +
tm_scale_bar(position = ("left"), lwd = 0.8) +
tm_layout(frame = F)
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
library(sf)
Chi_tracts = st_read("data/geo_export_aae47441-adab-4aca-8cb0-2e0c0114096e.shp")
head(Chi_tracts)
plot(Chi_tracts)
str(Chi_tracts)
st_crs(Chi_tracts)
Chi_tracts.moll <- st_transform(Chi_tracts, crs = "+proj=moll")
plot(st_geometry(Chi_tracts.moll), border = "gray", lwd = 2, main = "Mollweide", sub="preserves areas")
st_crs(Chi_tracts.moll)
Chi_tracts.54019 = st_transform(Chi_tracts, 54019)
plot(st_geometry(Chi_tracts.54019), border = "gray", lwd = 2, main = "Winkel", sub="minimal distortion")
st_crs(Chi_tracts.54019)
Chi_tracts.Hawaii = st_transform(Chi_tracts, 102114)
plot(st_geometry(Chi_tracts.Hawaii), border = "gray", lwd = 2, main = "Old Hawaiian UTM Zone 4N", sub="wrong projection!")
Chi_tracts.3435 <- st_transform(Chi_tracts, 3435)
st_crs(Chi_tracts.3435)
plot(st_geometry(Chi_tracts.3435), border = "gray", lwd = 2, main = "NAD83 / Illinois East (ftUS)", sub="topo mapping & survey use")
library(tmap)
tm_shape(Chi_tracts) + tm_borders(alpha=0.5)
Chi_tracts = st_read("data/geo_export_aae47441-adab-4aca-8cb0-2e0c0114096e.shp")
library(tmap)
tm_shape(Chi_tracts) + tm_borders(alpha=0.5)
library(tmap)
tm_shape(Chi_tracts.3435) + tm_borders(alpha=0.5)
tracts.4326 <- tm_shape(Chi_tracts) + tm_fill(col = "gray90") +
tm_layout(frame = F, title = "EPSG 4326")
tracts.54019 <- tm_shape(Chi_tracts.54019) + tm_fill(col = "gray90") +  tm_layout(frame = F, title = "EPSG 54019")
tmap_arrange(tracts.4326, tracts.54019)
tmap_arrange(tracts.3435, tracts.54019)
```{r }
tracts.3435 <- tm_shape(Chi_tracts.3435) + tm_fill(col = "gray90") +
tm_layout(frame = F, title = "EPSG 3435")
tracts.54019 <- tm_shape(Chi_tracts.54019) + tm_fill(col = "gray90") +  tm_layout(frame = F, title = "EPSG 54019")
tmap_arrange(tracts.3435, tracts.54019)
